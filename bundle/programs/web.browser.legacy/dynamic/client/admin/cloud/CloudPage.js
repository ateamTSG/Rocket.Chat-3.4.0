function module(e,n,t){var r,o,a,u,c,i,l,s,f,d,k,p,m,g,h,v,x,C,b,E,S,y,w,R,_;function T(){var e=m(),n=h(),t=x("cloud"),T=C("page"),I=v("error_code"),M=v("code"),W=v("state"),P=v("token"),A=g("cloud:finishOAuthAuthorization"),B=g("cloud:checkRegisterStatus"),q=g("cloud:connectWorkspace");k((function(){var r;(function(){function r(){return o.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:if("oauth-callback"===T){r.next=2;break}return r.abrupt("return");case 2:if(!I){r.next=6;break}return n({type:"error",title:e("Cloud_error_in_authenticating"),message:e("Cloud_error_code",{errorCode:I})}),t.push(),r.abrupt("return");case 6:return r.prev=6,r.next=9,o.awrap(A(M,W));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(6),n({type:"error",message:r.t0});case 14:return r.prev=14,t.push(),r.finish(14);case 17:case"end":return r.stop()}}return r}(),null,null,[[6,11,14,17]],Promise)}return r})()()}),[I,M,W,T,n,e,t,A]);var D=s(d()),z=r(D,2),F=z[0],G=z[1],H=d(null),L=r(H,2),O=L[0],Q=L[1],U=l(function(){function e(){var e;return o.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.awrap(B());case 3:e=t.sent,G(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:"error",message:t.t0});case 10:case"end":return t.stop()}}return t}(),null,null,[[0,7]],Promise)}return e}());k((function(){var t;(function(){function t(){var t;return o.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!P){r.next=8;break}return r.next=4,o.awrap(q(P));case 4:if(t=r.sent){r.next=7;break}throw Error(e("An error occured connecting"));case 7:n({type:"success",message:e("Connected")});case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),n({type:"error",message:r.t0});case 13:return r.prev=13,r.next=16,o.awrap(U());case 16:return r.finish(13);case 17:case"end":return r.stop()}}return r}(),null,null,[[0,10,13,17]],Promise)}return t})()()}),[q,n,U,e,P]);var j=function(){var e=function(){Q(null),U()};Q(f.createElement(R,{onClose:e}))},J=null==F?void 0:F.connectToCloud,K=null==F?void 0:F.workspaceRegistered;return f.createElement(p,null,f.createElement(p.Header,{title:e("Connectivity_Services")},f.createElement(c,null,!K&&f.createElement(u,{onClick:j},e("Cloud_Register_manually")),f.createElement(u,{is:"a",primary:!0,href:_,target:"_blank",rel:"noopener noreferrer"},e("Cloud_console")))),f.createElement(p.ScrollableContentWithShadow,null,O,f.createElement(a,{marginInline:"auto",marginBlock:"neg-x24",width:"full",maxWidth:"x580"},f.createElement(i,{block:"x24"},f.createElement(b,null),J&&f.createElement(f.Fragment,null,K?f.createElement(w,{onRegisterStatusChange:U}):f.createElement(y,{email:null==F?void 0:F.email,token:null==F?void 0:F.token,workspaceId:null==F?void 0:F.workspaceId,uniqueId:null==F?void 0:F.uniqueId,onRegisterStatusChange:U}),f.createElement(S,{onRegisterStatusChange:U})),!J&&f.createElement(E,{onRegisterStatusChange:U})))))}t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){o=e}},1),t.link("@rocket.chat/fuselage",{Box:function(e){a=e},Button:function(e){u=e},ButtonGroup:function(e){c=e},Margins:function(e){i=e}},0),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){l=e},useSafely:function(e){s=e}},1),t.link("react",{default:function(e){f=e},useState:function(e){d=e},useEffect:function(e){k=e}},2),t.link("../../components/basic/Page",{default:function(e){p=e}},3),t.link("../../contexts/TranslationContext",{useTranslation:function(e){m=e}},4),t.link("../../contexts/ServerContext",{useMethod:function(e){g=e}},5),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){h=e}},6),t.link("../../contexts/RouterContext",{useQueryStringParameter:function(e){v=e},useRoute:function(e){x=e},useRouteParameter:function(e){C=e}},7),t.link("./WhatIsItSection",{default:function(e){b=e}},8),t.link("./ConnectToCloudSection",{default:function(e){E=e}},9),t.link("./TroubleshootingSection",{default:function(e){S=e}},10),t.link("./WorkspaceRegistrationSection",{default:function(e){y=e}},11),t.link("./WorkspaceLoginSection",{default:function(e){w=e}},12),t.link("./ManualWorkspaceRegistrationModal",{default:function(e){R=e}},13),t.link("./constants",{cloudConsoleUrl:function(e){_=e}},14),t.exportDefault(T)}


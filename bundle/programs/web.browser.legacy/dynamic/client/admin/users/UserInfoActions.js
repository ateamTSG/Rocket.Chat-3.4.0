function module(e,n,t){var r,o,a,l,c,i,u,s,m,_,d,f,h,g,p,E,v,x,C,b,k,w,y;t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){o=e}},1),t.link("@babel/runtime/regenerator",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},3),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){c=e}},4),t.export({UserInfoActions:function(){return D}}),t.link("react",{default:function(e){i=e},useCallback:function(e){u=e},useMemo:function(e){s=e},useState:function(e){m=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){_=e},Button:function(e){d=e},ButtonGroup:function(e){f=e},Icon:function(e){h=e},Menu:function(e){g=e}},1),t.link("../../components/basic/Modal",{Modal:function(e){p=e}},2),t.link("../../contexts/TranslationContext",{useTranslation:function(e){E=e}},3),t.link("../../contexts/RouterContext",{useRoute:function(e){v=e}},4),t.link("../../contexts/AuthorizationContext",{usePermission:function(e){x=e}},5),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){C=e}},6),t.link("../../contexts/ServerContext",{useMethod:function(e){b=e},useEndpoint:function(e){k=e}},7),t.link("../../contexts/SettingsContext",{useSetting:function(e){w=e}},8),t.link("../../components/basic/RawText",{default:function(e){y=e}},9);var A=function(e){var n=e.onDelete,t=e.onCancel,r=c(e,["onDelete","onCancel"]),o=E(),a=w("Message_ErasureType");return i.createElement(p,r,i.createElement(p.Header,null,i.createElement(h,{color:"danger",name:"modal-warning",size:20}),i.createElement(p.Title,null,o("Are_you_sure")),i.createElement(p.Close,{onClick:t})),i.createElement(p.Content,{fontScale:"p1"},o("Delete_User_Warning_"+a)),i.createElement(p.Footer,null,i.createElement(f,{align:"end"},i.createElement(d,{ghost:!0,onClick:t},o("Cancel")),i.createElement(d,{primary:!0,danger:!0,onClick:n},o("Delete")))))},T=function(e){var n=e.onConfirm,t=e.onCancel,r=e.contentTitle,o=void 0===r?"":r,a=e.confirmLabel,l=void 0===a?"":a,u=e.shouldChangeOwner,s=e.shouldBeRemoved,m=c(e,["onConfirm","onCancel","contentTitle","confirmLabel","shouldChangeOwner","shouldBeRemoved"]),g=E(),v="";u.length>0&&(v=1===u.length?g("A_new_owner_will_be_assigned_automatically_to_the__roomName__room",{roomName:u.pop()}):u.length<=5?g("A_new_owner_will_be_assigned_automatically_to_those__count__rooms__rooms__",{count:u.length,rooms:u.join(", ")}):g("A_new_owner_will_be_assigned_automatically_to__count__rooms",{count:u.length}));var x="";return s.length>0&&(x=1===s.length?g("The_empty_room__roomName__will_be_removed_automatically",{roomName:s.pop()}):s.length<=5?g("__count__empty_rooms_will_be_removed_automatically__rooms__",{count:s.length,rooms:s.join(", ")}):g("__count__empty_rooms_will_be_removed_automatically",{count:s.length})),i.createElement(p,m,i.createElement(p.Header,null,i.createElement(h,{color:"danger",name:"modal-warning",size:20}),i.createElement(p.Title,null,g("Are_you_sure")),i.createElement(p.Close,{onClick:t})),i.createElement(p.Content,{fontScale:"p1"},o,v&&i.createElement(_,{marginBlock:"x16"},i.createElement(y,null,v)),x&&i.createElement(_,{marginBlock:"x16"},i.createElement(y,null,x))),i.createElement(p.Footer,null,i.createElement(f,{align:"end"},i.createElement(d,{ghost:!0,onClick:t},g("Cancel")),i.createElement(d,{primary:!0,danger:!0,onClick:n},l))))},S=function(e){var n=e.onClose,t=c(e,["onClose"]),r=E();return i.createElement(p,t,i.createElement(p.Header,null,i.createElement(h,{color:"success",name:"checkmark-circled",size:20}),i.createElement(p.Title,null,r("Deleted")),i.createElement(p.Close,{onClick:n})),i.createElement(p.Content,{fontScale:"p1"},r("User_has_been_deleted")),i.createElement(p.Footer,null,i.createElement(f,{align:"end"},i.createElement(d,{primary:!0,onClick:n},r("Ok")))))},D=function(e){var n=e.username,t=e._id,p=e.isActive,y=e.isAdmin,D=e.onChange,M=c(e,["username","_id","isActive","isAdmin","onChange"]),O=E(),R=m(),z=l(R,2),B=z[0],U=z[1],F=v("direct"),P=v("admin-users"),j=C(),N=x("create-d"),I=x("edit-other-user-info"),L=x("assign-admin-role"),H=x("edit-other-user-active-status"),W=x("delete-user"),q=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){function t(){var t,r,l,c,u;return a.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,a.awrap(e());case 3:return s.abrupt("return",s.sent);case 6:if(s.prev=6,s.t0=s.catch(0),"user-last-owner"!==(null===(t=s.t0.xhr)||void 0===t?void 0:null===(r=t.responseJSON)||void 0===r?void 0:r.errorType)){s.next=12;break}return l=s.t0.xhr.responseJSON.details,c=l.shouldChangeOwner,u=l.shouldBeRemoved,U(i.createElement(T,o({shouldChangeOwner:c,shouldBeRemoved:u},n,{onConfirm:function(){function n(){return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(e(!0));case 2:U();case 3:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}(),onCancel:function(){U(),D()}}))),s.abrupt("return");case 12:j({type:"error",message:s.t0});case 13:case"end":return s.stop()}}return s}(),null,null,[[0,6]],Promise)}return t}()},G=s((function(){return{userId:t}}),[t]),J=k("POST","users.delete"),Y=w("Message_ErasureType"),K=q(function(){function e(){var e,n,t=arguments;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return(e=t.length>0&&void 0!==t[0]&&t[0])&&(G.confirmRelinquish=e),r.next=4,a.awrap(J(G));case 4:(n=r.sent).success?U(i.createElement(S,{onClose:function(){U(),D()}})):U();case 6:case"end":return r.stop()}}return r}(),null,null,null,Promise)}return e}(),{contentTitle:O("Delete_User_Warning_"+Y),confirmLabel:O("Delete")}),Q=u((function(){U(i.createElement(A,{onDelete:K,onCancel:function(){return U()}}))}),[K]),V=b("setAdminStatus"),X=u((function(){try{var e;V(t,!y),j({type:"success",message:O(y?"User_is_no_longer_an_admin":"User_is_now_an_admin")}),D()}catch(n){j({type:"error",message:n})}}),[t,j,y,D,V,O]),Z=s((function(){return{userId:t,activeStatus:!p}}),[t,p]),$=p?"User_has_been_deactivated":"User_has_been_activated",ee=k("POST","users.setActiveStatus"),ne=q(function(){function e(){var e,n,t=arguments;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return(e=t.length>0&&void 0!==t[0]&&t[0])&&(Z.confirmRelinquish=e),r.prev=2,r.next=5,a.awrap(ee(Z));case 5:(n=r.sent).success&&(j({type:"success",message:O($)}),D()),r.next=12;break;case 9:throw r.prev=9,r.t0=r.catch(2),r.t0;case 12:case"end":return r.stop()}}return r}(),null,null,[[2,9]],Promise)}return e}(),{confirmLabel:O("Yes_deactivate_it")}),te=u((function(){return F.push({rid:n})}),[F,n]),re=u((function(){return P.push({context:"edit",id:t})}),[t,P]),oe=s((function(){return r({},N&&{directMessage:{label:i.createElement(i.Fragment,null,i.createElement(h,{name:"chat",size:"x16",mie:"x8"}),O("Direct_Message")),action:te}},{},I&&{editUser:{label:i.createElement(i.Fragment,null,i.createElement(h,{name:"edit",size:"x16",mie:"x8"}),O("Edit")),action:re}},{},L&&{makeAdmin:{label:i.createElement(i.Fragment,null,i.createElement(h,{mie:"x4",name:"key",size:"x16"}),O(y?"Remove_Admin":"Make_Admin")),action:X}},{},W&&{delete:{label:i.createElement(_,{color:"danger"},i.createElement(h,{mie:"x4",name:"trash",size:"x16"}),O("Delete")),action:Q}},{},H&&{changeActiveStatus:{label:i.createElement(i.Fragment,null,i.createElement(h,{mie:"x4",name:"user",size:"x16"}),O(p?"Deactivate":"Activate")),action:ne}})}),[O,N,te,I,re,L,y,X,W,Q,H,p,ne]),ae=s((function(){var e=Object.keys(oe),n=e.slice(0,2),t=e.slice(2,e.length);return[n.length&&n.map((function(e){return oe[e]})),t.length&&Object.fromEntries(t.map((function(e){return[e,oe[e]]})))]}),[oe]),le=l(ae,2),ce=le[0],ie=le[1];return i.createElement(i.Fragment,null,i.createElement(_,o({display:"flex",flexDirection:"row"},M),i.createElement(f,{flexGrow:1,justifyContent:"center"},ce&&ce.map((function(e,n){return i.createElement(d,{key:n,onClick:e.action},e.label)})),ie&&i.createElement(g,{options:ie,placement:"bottom left"}))),B)}}


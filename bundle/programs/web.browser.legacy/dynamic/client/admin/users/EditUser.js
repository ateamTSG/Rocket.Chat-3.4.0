function module(e,n,t){var r,a,u,s,i,o,l,c,d,f,m,p,v,k,b,x,E,_,h,w,A,y;function U(e){var n=e.uid,t=s(e,["uid"]),r=v(),a=k("roles.list","")||{},l=a.data,c=a.state,f=a.error,m=k("users.info",o((function(){return{userId:n}}),[n])),p=m.data,x=m.state,E=m.error;return[x,c].includes(b.LOADING)?i.createElement(y,null):E||f?i.createElement(d,u({mbs:"x16"},t),r("User_not_found")):i.createElement(T,u({data:p.user,roles:l.roles},t))}t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){u=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},3),t.export({EditUserWithData:function(){return U},EditUser:function(){return T}}),t.link("react",{default:function(e){i=e},useMemo:function(e){o=e},useState:function(e){l=e},useCallback:function(e){c=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){d=e},Field:function(e){f=e},Margins:function(e){m=e},Button:function(e){p=e}},1),t.link("../../contexts/TranslationContext",{useTranslation:function(e){v=e}},2),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){k=e},ENDPOINT_STATES:function(e){b=e}},3),t.link("../../hooks/useEndpointAction",{useEndpointAction:function(e){x=e}},4),t.link("../../hooks/useEndpointUpload",{useEndpointUpload:function(e){E=e}},5),t.link("../../contexts/RouterContext",{useRoute:function(e){_=e}},6),t.link("../../components/basic/avatar/UserAvatarEditor",{default:function(e){h=e}},7),t.link("../../hooks/useForm",{useForm:function(e){w=e}},8),t.link("./UserForm",{default:function(e){A=e}},9),t.link("./Skeleton",{FormSkeleton:function(e){y=e}},10);var S=function(e){var n,t,r,a;return{roles:e.roles,name:null!==(n=e.name)&&void 0!==n?n:"",password:"",username:e.username,status:e.status,bio:null!==(t=e.bio)&&void 0!==t?t:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(r=e.customFields)&&void 0!==r?r:{},statusText:null!==(a=e.statusText)&&void 0!==a?a:""}};function T(e){var n=e.data,t=e.roles,k=s(e,["data","roles"]),b=v(),y=l(),U=a(y,2),T=U[0],g=U[1],P=w(S(n)),C=P.values,O=P.handlers,F=P.reset,I=P.hasUnsavedChanges,R=_("admin-users"),D=c((function(e){return R.push({context:"info",id:e})}),[R]),N=o((function(){return{userId:n._id,data:C}}),[n._id,JSON.stringify(C)]),j=o((function(){return{userId:n._id,avatarUrl:T&&T.avatarUrl}}),[n._id,JSON.stringify(T)]),G=o((function(){return{userId:n._id}}),[n._id]),B=x("POST","users.update",N,b("User_updated_successfully")),J=E("users.setAvatar",j,b("Avatar_changed_successfully")),M=x("POST","users.setAvatar",j,b("Avatar_changed_successfully")),W=x("POST","users.resetAvatar",G,b("Avatar_changed_successfully")),q=c(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==T){e.next=2;break}return e.abrupt("return",W());case 2:if(!T.avatarUrl){e.next=4;break}return e.abrupt("return",M());case 4:return T.set("userId",n._id),e.abrupt("return",J(T));case 6:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[T,W,J,M,n._id]),H=c(function(){function e(){var e;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(B());case 2:if(!(e=t.sent).success){t.next=8;break}if(!T){t.next=7;break}return t.next=7,r.awrap(q());case 7:D(n._id);case 8:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),[T,n._id,D,B,q]),L=t.map((function(e){var n=e._id,t;return[n,e.description||n]})),V=I||T,z=o((function(){return i.createElement(h,{username:n.username,setAvatarObj:g})}),[n.username]),K=o((function(){return i.createElement(f,null,i.createElement(f.Row,null,i.createElement(d,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(m,{inlineEnd:"x4"},i.createElement(p,{flexGrow:1,type:"reset",disabled:!V,onClick:F},b("Reset")),i.createElement(p,{mie:"none",flexGrow:1,disabled:!V,onClick:H},b("Save"))))))}),[H,V,F,b]);return i.createElement(A,u({formValues:C,formHandlers:O,availableRoles:L,prepend:z,append:K},k))}}


function module(e,n,t){var r,l,a,o,c,u,i,s,m,f,d,E,p,h,C,k,b,x,g,v,S,y,_,w,D,T,F,M,B;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},3),t.export({EditCustomSound:function(){return A}}),t.link("react",{default:function(e){c=e},useCallback:function(e){u=e},useState:function(e){i=e},useMemo:function(e){s=e},useEffect:function(e){m=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){f=e},Button:function(e){d=e},ButtonGroup:function(e){E=e},Margins:function(e){p=e},TextInput:function(e){h=e},Field:function(e){C=e},Icon:function(e){k=e},Skeleton:function(e){b=e},Throbber:function(e){x=e},InputBox:function(e){g=e}},1),t.link("../../contexts/TranslationContext",{useTranslation:function(e){v=e}},2),t.link("../../contexts/ServerContext",{useMethod:function(e){S=e}},3),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){y=e}},4),t.link("../../components/basic/Modal",{Modal:function(e){_=e}},5),t.link("../../hooks/useFileInput",{useFileInput:function(e){w=e}},6),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){D=e},ENDPOINT_STATES:function(e){T=e}},7),t.link("./lib",{validate:function(e){F=e},createSoundData:function(e){M=e}},8),t.link("../../components/basic/VerticalBar",{default:function(e){B=e}},9);var I=function(e){var n=e.onDelete,t=e.onCancel,r=o(e,["onDelete","onCancel"]),l=v();return c.createElement(_,r,c.createElement(_.Header,null,c.createElement(k,{color:"danger",name:"modal-warning",size:20}),c.createElement(_.Title,null,l("Are_you_sure")),c.createElement(_.Close,{onClick:t})),c.createElement(_.Content,{fontScale:"p1"},l("Custom_Sound_Delete_Warning")),c.createElement(_.Footer,null,c.createElement(E,{align:"end"},c.createElement(d,{ghost:!0,onClick:t},l("Cancel")),c.createElement(d,{primary:!0,danger:!0,onClick:n},l("Delete")))))},N=function(e){var n=e.onClose,t=o(e,["onClose"]),r=v();return c.createElement(_,t,c.createElement(_.Header,null,c.createElement(k,{color:"success",name:"checkmark-circled",size:20}),c.createElement(_.Title,null,r("Deleted")),c.createElement(_.Close,{onClick:n})),c.createElement(_.Content,{fontScale:"p1"},r("Custom_Sound_Has_Been_Deleted")),c.createElement(_.Footer,null,c.createElement(E,{align:"end"},c.createElement(d,{primary:!0,onClick:n},r("Ok")))))};function A(e){var n=e._id,t=e.cache,r=o(e,["_id","cache"]),l=s((function(){return{query:JSON.stringify({_id:n})}}),[n]),u=D("custom-sounds.list",l),i=u.data,m=u.state,p=u.error;return m===T.LOADING?c.createElement(f,{pb:"x20"},c.createElement(b,{mbs:"x8"}),c.createElement(g.Skeleton,{w:"full"}),c.createElement(b,{mbs:"x8"}),c.createElement(g.Skeleton,{w:"full"}),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(d,{disabled:!0},c.createElement(x,{inheritColor:!0})),c.createElement(d,{primary:!0,disabled:!0},c.createElement(x,{inheritColor:!0}))),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(d,{primary:!0,danger:!0,disabled:!0},c.createElement(x,{inheritColor:!0})))):p||!i||i.sounds.length<1?c.createElement(f,{fontScale:"h1",pb:"x20"},p):c.createElement(O,a({data:i.sounds[0]},r))}function O(e){var n=e.close,t=e.onChange,a=e.data,b=o(e,["close","onChange","data"]),x=v(),g=y(),_=a||{},D=_._id,T=_.name,A=a||{},O=i(""),P=l(O,2),R=P[0],q=P[1],z=i(),H=l(z,2),L=H[0],G=H[1],U=i(),W=l(U,2),j=W[0],J=W[1];m((function(){q(T||""),G(A||"")}),[T,A,D]);var V=S("deleteCustomSound"),K=S("uploadCustomSound"),Q=S("insertOrUpdateSound"),X=u((function(e){G(e)}),[]),Y=s((function(){return T!==R||A!==L}),[R,T,A,L]),Z=u(function(){function e(e){var n,t,l,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:if(n=M(e,R,{previousName:T,previousSound:A,_id:D}),0!==(t=F(n,e)).length){o.next=15;break}return o.prev=3,o.next=6,r.awrap(Q(n));case 6:l=o.sent,o.next=12;break;case 9:o.prev=9,o.t0=o.catch(3),g({type:"error",message:o.t0});case 12:n._id=l,n.random=Math.round(1e3*Math.random()),e&&e!==A&&(g({type:"success",message:x("Uploading_file")}),(a=new FileReader).readAsBinaryString(e),a.onloadend=function(){try{return K(a.result,e.type,n),g({type:"success",message:x("File_uploaded")})}catch(t){g({type:"error",message:t})}});case 15:t.forEach((function(e){return g({type:"error",message:x("error-the-field-is-required",{field:x(e)})})}));case 16:case"end":return o.stop()}}return o}(),null,null,[[3,9]],Promise)}return e}(),[D,g,Q,R,T,A,x,K]),$=u(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:Z(L),t();case 2:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[Z,L,t]),ee=u(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(V(D));case 3:J((function(){return c.createElement(N,{onClose:function(){J(void 0),n(),t()}})})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),g({type:"error",message:e.t0}),t();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}(),[D,n,V,g,t]),ne=function(){return J((function(){return c.createElement(I,{onDelete:ee,onCancel:function(){return J(void 0)}})}))},te=w(X,"audio/mp3");return c.createElement(c.Fragment,null,c.createElement(B.ScrollableContent,b,c.createElement(C,null,c.createElement(C.Label,null,x("Name")),c.createElement(C.Row,null,c.createElement(h,{value:R,onChange:function(e){return q(e.currentTarget.value)},placeholder:x("Name")}))),c.createElement(C,null,c.createElement(C.Label,{alignSelf:"stretch"},x("Sound_File_mp3")),c.createElement(f,{display:"flex",flexDirection:"row",mbs:"none"},c.createElement(p,{inline:"x4"},c.createElement(d,{square:!0,onClick:te},c.createElement(k,{name:"upload",size:"x20"})),L&&L.name||"none"))),c.createElement(C,null,c.createElement(C.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(d,{onClick:n},x("Cancel")),c.createElement(d,{primary:!0,onClick:$,disabled:!Y},x("Save"))))),c.createElement(C,null,c.createElement(C.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(d,{primary:!0,danger:!0,onClick:ne},c.createElement(k,{name:"trash",mie:"x4"}),x("Delete")))))),j)}}


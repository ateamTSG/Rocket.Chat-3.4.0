function module(e,t,n){var r,a,s,u,i,o,c,f,m,l,d,h,y,p,v;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){s=e}},2),n.link("meteor/meteor",{Meteor:function(e){u=e}},0),n.link("meteor/reactive-var",{ReactiveVar:function(e){i=e}},1),n.link("meteor/templating",{Template:function(e){o=e}},2),n.link("meteor/rocketchat:tap-i18n",{TAPi18n:function(e){c=e}},3),n.link("meteor/kadira:flow-router",{FlowRouter:function(e){f=e}},4),n.link("toastr",{default:function(e){m=e}},5),n.link("moment",{default:function(e){l=e}},6),n.link("../../../../../utils/client",{t:function(e){d=e},handleError:function(e){h=e},APIClient:function(e){y=e}},7),n.link("./livechatBusinessHoursForm.html"),n.link("../customTemplates/register",{getCustomFormTemplate:function(e){p=e}},8),n.link("./BusinessHours",{businessHourManager:function(e){v=e}},9),o.livechatBusinessHoursForm.helpers({days:function(){return o.instance().businessHour.get().workHours},startName:function(e){return e.day+"_start"},finishName:function(e){return e.day+"_finish"},openName:function(e){return e.day+"_open"},start:function(e){return o.instance().dayVars[e.day].start.get()},finish:function(e){return o.instance().dayVars[e.day].finish.get()},name:function(e){return c.__(e.day)},open:function(e){return o.instance().dayVars[e.day].open.get()},customFieldsTemplate:function(){if(v.showCustomTemplate(o.instance().businessHour.get()))return p("livechatBusinessHoursForm")},timezoneTemplate:function(){if(v.showTimezoneTemplate())return p("livechatBusinessHoursTimezoneForm")},showBackButton:function(){return v.showBackButton()},data:function(){return o.instance().businessHour}});var H=function(e){return e.split("_")};o.livechatBusinessHoursForm.events({"change .preview-settings, keydown .preview-settings":function(e,t){var n=H(e.currentTarget.name),r=s(n,2),a=r[0],u=r[1],i=l(e.currentTarget.value,"HH:mm");"start"===u?i.isSameOrBefore(l(t.dayVars[a].finish.get(),"HH:mm"))?t.dayVars[a].start.set(e.currentTarget.value):e.currentTarget.value=t.dayVars[a].start.get():"finish"===u&&(i.isSameOrAfter(l(t.dayVars[a].start.get(),"HH:mm"))?t.dayVars[a].finish.set(e.currentTarget.value):e.currentTarget.value=t.dayVars[a].finish.get())},"change .dayOpenCheck input":function(e,t){var n=H(e.currentTarget.name),r=s(n,2),a=r[0],u=r[1];t.dayVars[a][u].set(e.target.checked)},"change .preview-settings, keyup .preview-settings":function(e,t){var n=e.currentTarget.value;"radio"===e.currentTarget.type&&(n="true"===n,t[e.currentTarget.name].set(n))},"click button.back":function(e){e.preventDefault(),f.go("livechat-business-hours")},"submit .rocket-form":function(e,t){e.preventDefault();var n=[];for(var r in meteorBabelHelpers.sanitizeForInObject(t.dayVars))if(t.dayVars.hasOwnProperty(r)){var s=t.dayVars[r],i=l(s.start.get(),"HH:mm").format("HH:mm"),o=l(s.finish.get(),"HH:mm").format("HH:mm");n.push({day:r,start:i,finish:o,open:s.open.get()})}var c=a({},t.businessHour.get(),{workHours:n});t.$(".customFormField").each((function(e,n){var r=t.$(n),a=r.attr("name");c[a]=r.val()})),u.call("livechat:saveBusinessHour",c,(function(e){if(e)return h(e);m.success(d("Business_hours_updated")),f.go("livechat-business-hours")}))}});var g=function(){var e,t=["Saturday","Sunday"];return{workHours:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((function(e){return{day:e,start:"00:00",finish:"00:00",open:!t.includes(e)}}))}};o.livechatBusinessHoursForm.onCreated(function(){function e(){var e=this;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:this.dayVars=g().workHours.reduce((function(e,t){return e[t.day]={start:new i(t.start),finish:new i(t.finish),open:new i(t.open)},e}),{}),this.businessHour=new i({}),this.businessHour.set(a({},g())),this.autorun(function(){function t(){var t,n,a,s,u;return r.async(function(){function i(i){for(;;)switch(i.prev=i.next){case 0:if(!f.current().route.name.includes("new")){i.next=2;break}return i.abrupt("return");case 2:return t=f.getParam("_id"),n=f.getParam("type"),a="livechat/business-hour",t&&n&&(a+="?_id="+t+"&type="+n),i.next=8,r.awrap(y.v1.get(a));case 8:if(s=i.sent,u=s.businessHour){i.next=12;break}return i.abrupt("return");case 12:e.businessHour.set(u),u.workHours.forEach((function(t){e.dayVars[t.day].start.set(l.utc(t.start.utc.time,"HH:mm").tz(u.timezone.name).format("HH:mm")),e.dayVars[t.day].finish.set(l.utc(t.finish.utc.time,"HH:mm").tz(u.timezone.name).format("HH:mm")),e.dayVars[t.day].open.set(t.open)}));case 14:case"end":return i.stop()}}return i}(),null,null,null,Promise)}return t}());case 4:case"end":return t.stop()}}return t}(),null,this,null,Promise)}return e}())}


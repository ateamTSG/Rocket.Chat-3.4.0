function module(e,i,t){var n,a,s,l,r,o,c,f,u;t.link("@babel/runtime/regenerator",{default:function(e){n=e}},0),t.link("meteor/meteor",{Meteor:function(e){a=e}},0),t.link("meteor/reactive-var",{ReactiveVar:function(e){s=e}},1),t.link("meteor/templating",{Template:function(e){l=e}},2),t.link("underscore.string",{default:function(e){r=e}},3),t.link("toastr",{default:function(e){o=e}},4),t.link("../../../../utils",{t:function(e){c=e},handleError:function(e){f=e}},5),t.link("./livechatAppearance.html"),t.link("../../../../utils/client",{APIClient:function(e){u=e}},6);var h=function(e,i){return e.appearance.get()&&e.appearance.get().find((function(e){return e._id===i}))};l.livechatAppearance.helpers({color:function(){return l.instance().color.get()},showAgentInfo:function(){return l.instance().showAgentInfo.get()},showAgentEmail:function(){return l.instance().showAgentEmail.get()},title:function(){return l.instance().title.get()},colorOffline:function(){return l.instance().colorOffline.get()},titleOffline:function(){return l.instance().titleOffline.get()},offlineMessage:function(){return l.instance().offlineMessage.get()},sampleOfflineMessage:function(){return l.instance().offlineMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},offlineSuccessMessage:function(){return l.instance().offlineSuccessMessage.get()},sampleOfflineSuccessMessage:function(){return l.instance().offlineSuccessMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},showAgentInfoFormTrueChecked:function(){if(l.instance().showAgentInfo.get())return"checked"},showAgentInfoFormFalseChecked:function(){if(!l.instance().showAgentInfo.get())return"checked"},showAgentEmailFormTrueChecked:function(){if(l.instance().showAgentEmail.get())return"checked"},showAgentEmailFormFalseChecked:function(){if(!l.instance().showAgentEmail.get())return"checked"},displayOfflineFormTrueChecked:function(){if(l.instance().displayOfflineForm.get())return"checked"},displayOfflineFormFalseChecked:function(){if(!l.instance().displayOfflineForm.get())return"checked"},offlineUnavailableMessage:function(){return l.instance().offlineUnavailableMessage.get()},sampleOfflineUnavailableMessage:function(){return l.instance().offlineUnavailableMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},emailOffline:function(){return l.instance().offlineEmail.get()},conversationFinishedMessage:function(){return l.instance().conversationFinishedMessage.get()},conversationFinishedText:function(){return l.instance().conversationFinishedText.get()},registrationFormEnabled:function(){if(l.instance().registrationFormEnabled.get())return"checked"},registrationFormNameFieldEnabled:function(){if(l.instance().registrationFormNameFieldEnabled.get())return"checked"},registrationFormEmailFieldEnabled:function(){if(l.instance().registrationFormEmailFieldEnabled.get())return"checked"},registrationFormMessage:function(){return l.instance().registrationFormMessage.get()}}),l.livechatAppearance.onCreated(function(){function e(){var e,i,t,a,l,r,o,c,f,g,v,_,m,d,F,p,L,w,E;return n.async(function(){function M(M){for(;;)switch(M.prev=M.next){case 0:return this.appearance=new s([]),this.title=new s(null),this.color=new s(null),this.showAgentInfo=new s(null),this.showAgentEmail=new s(null),this.displayOfflineForm=new s(null),this.offlineUnavailableMessage=new s(null),this.offlineMessage=new s(null),this.offlineSuccessMessage=new s(null),this.titleOffline=new s(null),this.colorOffline=new s(null),this.offlineEmail=new s(null),this.conversationFinishedMessage=new s(null),this.conversationFinishedText=new s(null),this.registrationFormEnabled=new s(null),this.registrationFormNameFieldEnabled=new s(null),this.registrationFormEmailFieldEnabled=new s(null),this.registrationFormMessage=new s(null),M.next=20,n.awrap(u.v1.get("livechat/appearance"));case 20:e=M.sent,i=e.appearance,this.appearance.set(i),t=h(this,"Livechat_title"),a=h(this,"Livechat_title_color"),l=h(this,"Livechat_show_agent_info"),r=h(this,"Livechat_show_agent_email"),o=h(this,"Livechat_display_offline_form"),c=h(this,"Livechat_offline_form_unavailable"),f=h(this,"Livechat_offline_message"),g=h(this,"Livechat_offline_success_message"),v=h(this,"Livechat_offline_title"),_=h(this,"Livechat_offline_title_color"),m=h(this,"Livechat_offline_email"),d=h(this,"Livechat_conversation_finished_message"),F=h(this,"Livechat_registration_form_message"),p=h(this,"Livechat_registration_form"),L=h(this,"Livechat_name_field_registration_form"),w=h(this,"Livechat_email_field_registration_form"),E=h(this,"Livechat_conversation_finished_text"),this.title.set(t&&t.value),this.color.set(a&&a.value),this.showAgentInfo.set(l&&l.value),this.showAgentEmail.set(r&&r.value),this.displayOfflineForm.set(o&&o.value),this.offlineUnavailableMessage.set(c&&c.value),this.offlineMessage.set(f&&f.value),this.offlineSuccessMessage.set(g&&g.value),this.titleOffline.set(v&&v.value),this.colorOffline.set(_&&_.value),this.offlineEmail.set(m&&m.value),this.conversationFinishedMessage.set(d&&d.value),this.registrationFormMessage.set(F&&F.value),this.registrationFormEnabled.set(p&&p.value),this.registrationFormNameFieldEnabled.set(L&&L.value),this.registrationFormEmailFieldEnabled.set(w&&w.value),this.conversationFinishedText.set(E&&E.value);case 57:case"end":return M.stop()}}return M}(),null,this,null,Promise)}return e}()),l.livechatAppearance.events({"change .js-input-check":function(e,i){i[e.currentTarget.name].set(e.currentTarget.checked)},"change .preview-settings, keyup .preview-settings":function(e,i){var t=e.currentTarget.value;"radio"===e.currentTarget.type&&(t="true"===t),i[e.currentTarget.name].set(t)},"click .reset-settings":function(e,i){e.preventDefault();var t=h(i,"Livechat_title");i.title.set(t&&t.value);var n=h(i,"Livechat_title_color");i.color.set(n&&n.value);var a=h(i,"Livechat_show_agent_info");i.showAgentInfo.set(a&&a.value);var s=h(i,"Livechat_show_agent_email");i.showAgentEmail.set(s&&s.value);var l=h(i,"Livechat_display_offline_form");i.displayOfflineForm.set(l&&l.value);var r=h(i,"Livechat_offline_form_unavailable");i.offlineUnavailableMessage.set(r&&r.value);var o=h(i,"Livechat_offline_message");i.offlineMessage.set(o&&o.value);var c=h(i,"Livechat_offline_success_message");i.offlineSuccessMessage.set(c&&c.value);var f=h(i,"Livechat_offline_title");i.titleOffline.set(f&&f.value);var u=h(i,"Livechat_offline_title_color");i.colorOffline.set(u&&u.value);var g=h(i,"Livechat_conversation_finished_message");i.conversationFinishedMessage.set(g&&g.value);var v=h(i,"Livechat_conversation_finished_text");i.conversationFinishedText.set(v&&v.value);var _=h(i,"Livechat_registration_form");i.registrationFormEnabled.set(_&&_.value);var m=h(i,"Livechat_name_field_registration_form");i.registrationFormNameFieldEnabled.set(m&&m.value);var d=h(i,"Livechat_email_field_registration_form");i.registrationFormEmailFieldEnabled.set(d&&d.value);var F=h(i,"Livechat_registration_form_message");i.registrationFormMessage.set(F&&F.value)},"submit .rocket-form":function(e,i){e.preventDefault();var t=[{_id:"Livechat_title",value:r.trim(i.title.get())},{_id:"Livechat_title_color",value:i.color.get()},{_id:"Livechat_show_agent_info",value:i.showAgentInfo.get()},{_id:"Livechat_show_agent_email",value:i.showAgentEmail.get()},{_id:"Livechat_display_offline_form",value:i.displayOfflineForm.get()},{_id:"Livechat_offline_form_unavailable",value:r.trim(i.offlineUnavailableMessage.get())},{_id:"Livechat_offline_message",value:r.trim(i.offlineMessage.get())},{_id:"Livechat_offline_success_message",value:r.trim(i.offlineSuccessMessage.get())},{_id:"Livechat_offline_title",value:r.trim(i.titleOffline.get())},{_id:"Livechat_offline_title_color",value:i.colorOffline.get()},{_id:"Livechat_offline_email",value:i.$("#emailOffline").val()},{_id:"Livechat_conversation_finished_message",value:r.trim(i.conversationFinishedMessage.get())},{_id:"Livechat_conversation_finished_text",value:r.trim(i.conversationFinishedText.get())},{_id:"Livechat_registration_form",value:i.registrationFormEnabled.get()},{_id:"Livechat_name_field_registration_form",value:i.registrationFormNameFieldEnabled.get()},{_id:"Livechat_email_field_registration_form",value:i.registrationFormEmailFieldEnabled.get()},{_id:"Livechat_registration_form_message",value:r.trim(i.registrationFormMessage.get())}];a.call("livechat:saveAppearance",t,(function(e){if(e)return f(e);i.appearance.set(t),o.success(c("Settings_updated"))}))}})}


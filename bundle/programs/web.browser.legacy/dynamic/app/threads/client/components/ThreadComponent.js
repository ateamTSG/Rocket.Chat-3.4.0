function module(e,t,n){var r,l,i,o,a,u,c,f,s,d,m,p,x,k,h,b,g,w,E,v,C,T,M,y,I,R;function j(e){var t=e.mid,n=e.rid,j=e.jump,z=e.room,A=a(e,["mid","rid","jump","room"]),B=M(),S=E(v.getConfig(z.t).route.name),F=s({}),P=o(F,2),_=P[0],D=P[1],G=I("expand-threads",!1),L=o(G,2),W=L[0],O=L[1],H=f(),N=m((function(){return k.userId()}),[]),V=m((function(){return i({top:0,right:0,maxWidth:"855px"},"rtl"===document.dir?{borderTopRightRadius:"4px"}:{borderTopLeftRadius:"4px"},{overflow:"hidden",bottom:0,zIndex:100})}),[document.dir]),q=_.replies&&_.replies.includes(N),J=m((function(){return q?"unfollow":"follow"}),[q]),K=m((function(){return"follow"===J?"bell-off":"bell"}),[J]),Q=B("follow"===J?"Not_Following":"Following"),U=m((function(){return R(_)}),[_._updatedAt]),X=W?"collapse":"expand",Y=W?"arrow-collapse":"arrow-expand",Z=d((function(){O(!W)}),[W]),$=d((function(){return T("follow"===J?"followMessage":"unfollowMessage",{mid:t})}),[J,t]),ee=d((function(){S.push("d"===z.t?{rid:n}:{name:z.name})}),[S,z.t,z.name]);return c((function(){var e=g.autorun(function(){function e(){var e;return l.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=w.findOne({_id:t}),n.t0){n.next=5;break}return n.next=4,l.awrap(C.v1.get("chat.getMessage",{msgId:t}));case 4:n.t0=n.sent.message;case 5:if(e=n.t0){n.next=8;break}return n.abrupt("return");case 8:D(e);case 9:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}());return function(){return e.stop()}}),[t]),c((function(){var e;return function(){function n(){return l.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=_.rid&&H.current,!n.t0){n.next=18;break}if(n.t1=b,n.t2=h.thread,n.t3=i,n.t4=w.findOne({_id:t}),n.t4){n.next=10;break}return n.next=9,l.awrap(C.v1.get("chat.getMessage",{msgId:t}));case 9:n.t4=n.sent.message;case 10:n.t5=n.t4,n.t6=j,n.t7=q,n.t8={mainMessage:n.t5,jump:n.t6,following:n.t7},n.t9=A,n.t10=(0,n.t3)(n.t8,n.t9),n.t11=H.current,n.t0=n.t1.renderWithData.call(n.t1,n.t2,n.t10,n.t11);case 18:e=n.t0;case 19:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}()(),function(){return e&&b.remove(e)}}),[_.rid,t]),_.rid?u.createElement(u.Fragment,null,W&&u.createElement(p.Backdrop,{onClick:ee}),u.createElement(x,r({width:"380px",flexGrow:1},!W&&{position:"relative"}),u.createElement(y,r({"rcx-thread-view":!0,width:"full",style:V,display:"flex",flexDirection:"column",position:"absolute"},!W&&{width:"380px"}),u.createElement(y.Header,null,u.createElement(y.Icon,{name:"thread"}),u.createElement(y.Text,null,U),u.createElement(y.Action,{"aria-label":X,onClick:Z,name:Y}),u.createElement(y.Action,{"aria-label":Q,onClick:$,name:K}),u.createElement(y.Close,{"aria-label":B("Close"),onClick:ee})),u.createElement(y.Content,{paddingInline:0,flexShrink:1,flexGrow:1,ref:H})))):u.createElement(u.Fragment,null,W&&u.createElement(p.Backdrop,{onClick:ee}),u.createElement(x,r({width:"380px",flexGrow:1},!W&&{position:"relative"}),u.createElement(y.Skeleton,r({"rcx-thread-view":!0,width:"full",style:V,display:"flex",flexDirection:"column",position:"absolute"},!W&&{width:"380px"}))))}n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},3),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},4),n.export({default:function(){return j}}),n.link("react",{default:function(e){u=e},useEffect:function(e){c=e},useRef:function(e){f=e},useState:function(e){s=e},useCallback:function(e){d=e},useMemo:function(e){m=e}},0),n.link("@rocket.chat/fuselage",{Modal:function(e){p=e},Box:function(e){x=e}},1),n.link("meteor/meteor",{Meteor:function(e){k=e}},2),n.link("meteor/templating",{Template:function(e){h=e}},3),n.link("meteor/blaze",{Blaze:function(e){b=e}},4),n.link("meteor/tracker",{Tracker:function(e){g=e}},5),n.link("../../../models/client",{ChatMessage:function(e){w=e}},6),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){E=e}},7),n.link("../../../utils/client",{roomTypes:function(e){v=e},APIClient:function(e){C=e}},8),n.link("../../../ui-utils/client",{call:function(e){T=e}},9),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){M=e}},10),n.link("../../../../client/components/basic/VerticalBar",{default:function(e){y=e}},11),n.link("./hooks/useLocalstorage",{useLocalStorage:function(e){I=e}},12),n.link("../lib/normalizeThreadTitle",{normalizeThreadTitle:function(e){R=e}},13)}


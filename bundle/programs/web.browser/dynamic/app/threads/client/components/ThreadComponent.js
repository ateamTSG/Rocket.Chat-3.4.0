function module(e,t,l){let n,a,o,i,r,s,c,d,m,u,p,f,k,x,h,g,w,b,E,C,T,M,v,y;function I(e){let{mid:t,rid:l,jump:I,room:R}=e,j=o(e,["mid","rid","jump","room"]);const z=T(),B=w(b.getConfig(R.t).route.name),[S,A]=c({}),[F,_]=v("expand-threads",!1),D=s(),G=m(()=>f.userId(),[]),L=m(()=>a({top:0,right:0,maxWidth:"855px"},"rtl"===document.dir?{borderTopRightRadius:"4px"}:{borderTopLeftRadius:"4px"},{overflow:"hidden",bottom:0,zIndex:100}),[document.dir]),W=S.replies&&S.replies.includes(G),O=m(()=>W?"unfollow":"follow",[W]),P=m(()=>"follow"===O?"bell-off":"bell",[O]),H=z("follow"===O?"Not_Following":"Following"),N=m(()=>y(S),[S._updatedAt]),V=F?"collapse":"expand",q=F?"arrow-collapse":"arrow-expand",J=d(()=>{_(!F)},[F]),K=d(()=>C("follow"===O?"followMessage":"unfollowMessage",{mid:t}),[O,t]),Q=d(()=>{B.push("d"===R.t?{rid:l}:{name:R.name})},[B,R.t,R.name]);return r(()=>{const e=h.autorun(async()=>{const e=g.findOne({_id:t})||(await E.v1.get("chat.getMessage",{msgId:t})).message;e&&A(e)});return()=>e.stop()},[t]),r(()=>{let e;return(async()=>{e=S.rid&&D.current&&x.renderWithData(k.thread,a({mainMessage:g.findOne({_id:t})||(await E.v1.get("chat.getMessage",{msgId:t})).message,jump:I,following:W},j),D.current)})(),()=>e&&x.remove(e)},[S.rid,t]),S.rid?i.createElement(i.Fragment,null,F&&i.createElement(u.Backdrop,{onClick:Q}),i.createElement(p,n({width:"380px",flexGrow:1},!F&&{position:"relative"}),i.createElement(M,n({"rcx-thread-view":!0,width:"full",style:L,display:"flex",flexDirection:"column",position:"absolute"},!F&&{width:"380px"}),i.createElement(M.Header,null,i.createElement(M.Icon,{name:"thread"}),i.createElement(M.Text,null,N),i.createElement(M.Action,{"aria-label":V,onClick:J,name:q}),i.createElement(M.Action,{"aria-label":H,onClick:K,name:P}),i.createElement(M.Close,{"aria-label":z("Close"),onClick:Q})),i.createElement(M.Content,{paddingInline:0,flexShrink:1,flexGrow:1,ref:D})))):i.createElement(i.Fragment,null,F&&i.createElement(u.Backdrop,{onClick:Q}),i.createElement(p,n({width:"380px",flexGrow:1},!F&&{position:"relative"}),i.createElement(M.Skeleton,n({"rcx-thread-view":!0,width:"full",style:L,display:"flex",flexDirection:"column",position:"absolute"},!F&&{width:"380px"}))))}l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){o=e}},2),l.export({default:()=>I}),l.link("react",{default(e){i=e},useEffect(e){r=e},useRef(e){s=e},useState(e){c=e},useCallback(e){d=e},useMemo(e){m=e}},0),l.link("@rocket.chat/fuselage",{Modal(e){u=e},Box(e){p=e}},1),l.link("meteor/meteor",{Meteor(e){f=e}},2),l.link("meteor/templating",{Template(e){k=e}},3),l.link("meteor/blaze",{Blaze(e){x=e}},4),l.link("meteor/tracker",{Tracker(e){h=e}},5),l.link("../../../models/client",{ChatMessage(e){g=e}},6),l.link("../../../../client/contexts/RouterContext",{useRoute(e){w=e}},7),l.link("../../../utils/client",{roomTypes(e){b=e},APIClient(e){E=e}},8),l.link("../../../ui-utils/client",{call(e){C=e}},9),l.link("../../../../client/contexts/TranslationContext",{useTranslation(e){T=e}},10),l.link("../../../../client/components/basic/VerticalBar",{default(e){M=e}},11),l.link("./hooks/useLocalstorage",{useLocalStorage(e){v=e}},12),l.link("../lib/normalizeThreadTitle",{normalizeThreadTitle(e){y=e}},13)}


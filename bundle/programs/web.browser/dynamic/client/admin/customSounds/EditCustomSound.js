function module(e,t,n){let l,a,r,o,c,s,i,m,u,d,E,p,C,h,k,g,f,b,x,y,S,_,D,w,T,v,F;n.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},1),n.export({EditCustomSound:()=>I}),n.link("react",{default(e){r=e},useCallback(e){o=e},useState(e){c=e},useMemo(e){s=e},useEffect(e){i=e}},0),n.link("@rocket.chat/fuselage",{Box(e){m=e},Button(e){u=e},ButtonGroup(e){d=e},Margins(e){E=e},TextInput(e){p=e},Field(e){C=e},Icon(e){h=e},Skeleton(e){k=e},Throbber(e){g=e},InputBox(e){f=e}},1),n.link("../../contexts/TranslationContext",{useTranslation(e){b=e}},2),n.link("../../contexts/ServerContext",{useMethod(e){x=e}},3),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){y=e}},4),n.link("../../components/basic/Modal",{Modal(e){S=e}},5),n.link("../../hooks/useFileInput",{useFileInput(e){_=e}},6),n.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){D=e},ENDPOINT_STATES(e){w=e}},7),n.link("./lib",{validate(e){T=e},createSoundData(e){v=e}},8),n.link("../../components/basic/VerticalBar",{default(e){F=e}},9);const M=e=>{let{onDelete:t,onCancel:n}=e,l=a(e,["onDelete","onCancel"]);const o=b();return(r.createElement(S,l,r.createElement(S.Header,null,r.createElement(h,{color:"danger",name:"modal-warning",size:20}),r.createElement(S.Title,null,o("Are_you_sure")),r.createElement(S.Close,{onClick:n})),r.createElement(S.Content,{fontScale:"p1"},o("Custom_Sound_Delete_Warning")),r.createElement(S.Footer,null,r.createElement(d,{align:"end"},r.createElement(u,{ghost:!0,onClick:n},o("Cancel")),r.createElement(u,{primary:!0,danger:!0,onClick:t},o("Delete"))))))},B=e=>{let{onClose:t}=e,n=a(e,["onClose"]);const l=b();return(r.createElement(S,n,r.createElement(S.Header,null,r.createElement(h,{color:"success",name:"checkmark-circled",size:20}),r.createElement(S.Title,null,l("Deleted")),r.createElement(S.Close,{onClick:t})),r.createElement(S.Content,{fontScale:"p1"},l("Custom_Sound_Has_Been_Deleted")),r.createElement(S.Footer,null,r.createElement(d,{align:"end"},r.createElement(u,{primary:!0,onClick:t},l("Ok"))))))};function I(e){let{_id:t,cache:n}=e,o=a(e,["_id","cache"]);const c=s(()=>({query:JSON.stringify({_id:t})}),[t]),{data:i,state:E,error:p}=D("custom-sounds.list",c);return E===w.LOADING?r.createElement(m,{pb:"x20"},r.createElement(k,{mbs:"x8"}),r.createElement(f.Skeleton,{w:"full"}),r.createElement(k,{mbs:"x8"}),r.createElement(f.Skeleton,{w:"full"}),r.createElement(d,{stretch:!0,w:"full",mbs:"x8"},r.createElement(u,{disabled:!0},r.createElement(g,{inheritColor:!0})),r.createElement(u,{primary:!0,disabled:!0},r.createElement(g,{inheritColor:!0}))),r.createElement(d,{stretch:!0,w:"full",mbs:"x8"},r.createElement(u,{primary:!0,danger:!0,disabled:!0},r.createElement(g,{inheritColor:!0})))):p||!i||i.sounds.length<1?r.createElement(m,{fontScale:"h1",pb:"x20"},p):r.createElement(N,l({data:i.sounds[0]},o))}function N(e){let{close:t,onChange:n,data:l}=e,k=a(e,["close","onChange","data"]);const g=b(),f=y(),{_id:S,name:D}=l||{},w=l||{},[I,N]=c(""),[O,A]=c(),[R,q]=c();i(()=>{N(D||""),A(w||"")},[D,w,S]);const z=x("deleteCustomSound"),H=x("uploadCustomSound"),L=x("insertOrUpdateSound"),G=o(e=>{A(e)},[]),P=s(()=>D!==I||w!==O,[I,D,w,O]),U=o(async e=>{const t=v(e,I,{previousName:D,previousSound:w,_id:S}),n=T(t,e);if(0===n.length){let n;try{n=await L(t)}catch(l){f({type:"error",message:l})}if(t._id=n,t.random=Math.round(1e3*Math.random()),e&&e!==w){f({type:"success",message:g("Uploading_file")});const n=new FileReader;n.readAsBinaryString(e),n.onloadend=()=>{try{return H(n.result,e.type,t),f({type:"success",message:g("File_uploaded")})}catch(l){f({type:"error",message:l})}}}}n.forEach(e=>f({type:"error",message:g("error-the-field-is-required",{field:g(e)})}))},[S,f,L,I,D,w,g,H]),W=o(async()=>{U(O),n()},[U,O,n]),j=o(async()=>{try{await z(S),q(()=>r.createElement(B,{onClose:()=>{q(void 0),t(),n()}}))}catch(e){f({type:"error",message:e}),n()}},[S,t,z,f,n]),J=()=>q(()=>r.createElement(M,{onDelete:j,onCancel:()=>q(void 0)})),V=_(G,"audio/mp3");return r.createElement(r.Fragment,null,r.createElement(F.ScrollableContent,k,r.createElement(C,null,r.createElement(C.Label,null,g("Name")),r.createElement(C.Row,null,r.createElement(p,{value:I,onChange:e=>N(e.currentTarget.value),placeholder:g("Name")}))),r.createElement(C,null,r.createElement(C.Label,{alignSelf:"stretch"},g("Sound_File_mp3")),r.createElement(m,{display:"flex",flexDirection:"row",mbs:"none"},r.createElement(E,{inline:"x4"},r.createElement(u,{square:!0,onClick:V},r.createElement(h,{name:"upload",size:"x20"})),O&&O.name||"none"))),r.createElement(C,null,r.createElement(C.Row,null,r.createElement(d,{stretch:!0,w:"full"},r.createElement(u,{onClick:t},g("Cancel")),r.createElement(u,{primary:!0,onClick:W,disabled:!P},g("Save"))))),r.createElement(C,null,r.createElement(C.Row,null,r.createElement(d,{stretch:!0,w:"full"},r.createElement(u,{primary:!0,danger:!0,onClick:J},r.createElement(h,{name:"trash",mie:"x4"}),g("Delete")))))),R)}}


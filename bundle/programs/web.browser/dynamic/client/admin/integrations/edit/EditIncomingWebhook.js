function module(e,t,n){let a,l,o,i,r,s,c,u,m,d,p,E,x,g,k,b,f,h,C,v,w,D,y;function I(e){let{integrationId:t}=e,n=o(e,["integrationId"]);const a=k(),[c,u]=s(),{data:p,state:E,error:x}=b("integrations.get",r(()=>({integrationId:t}),[t,c])),g=()=>u(new Date);return E===f.LOADING?i.createElement(m,l({w:"full",pb:"x24"},n),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"}),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"}),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"})):x?i.createElement(m,l({mbs:"x16"},n),a("Oops_page_not_found")):i.createElement(S,l({data:p.integration,onChange:g},n))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){l=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){o=e}},2),n.export({default:()=>I}),n.link("react",{default(e){i=e},useMemo(e){r=e},useState(e){s=e},useCallback(e){c=e}},0),n.link("@rocket.chat/fuselage",{Field(e){u=e},Box(e){m=e},Skeleton(e){d=e},Margins(e){p=e},Button(e){E=e}},1),n.link("./EditIntegrationsPage",{SuccessModal(e){x=e},DeleteWarningModal(e){g=e}},2),n.link("../../../contexts/TranslationContext",{useTranslation(e){k=e}},3),n.link("../../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){b=e},ENDPOINT_STATES(e){f=e}},4),n.link("../../../contexts/ServerContext",{useMethod(e){h=e}},5),n.link("../../../hooks/useEndpointAction",{useEndpointAction(e){C=e}},6),n.link("../../../contexts/RouterContext",{useRoute(e){v=e}},7),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){w=e}},8),n.link("../../../hooks/useForm",{useForm(e){D=e}},9),n.link("../IncomingWebhookForm",{default(e){y=e}},10);const _=e=>{var t,n,a,l,o,i;const r={enabled:e.enabled,channel:null!==(t=e.channel.join(", "))&&void 0!==t?t:"",username:null!==(n=e.username)&&void 0!==n?n:"",name:null!==(a=e.name)&&void 0!==a?a:"",alias:null!==(l=e.alias)&&void 0!==l?l:"",avatarUrl:null!==(o=e.avatarUrl)&&void 0!==o?o:"",emoji:null!==(i=e.emoji)&&void 0!==i?i:"",scriptEnabled:e.scriptEnabled,script:e.script};return r};function S(e){let{data:t,onChange:n}=e,d=o(e,["data","onChange"]);const b=k(),f=w(),{values:I,handlers:S,reset:T}=D(_(t)),[M,j]=s(),F=r(()=>({type:"webhook-incoming",integrationId:t._id}),[t._id]),A=C("POST","integrations.remove",F),O=h("updateIncomingIntegration"),P=v("admin-integrations"),R=c(()=>{const e=()=>j(),t=async()=>{const t=await A();t.success&&j(i.createElement(x,{onClose:()=>{e(),P.push({})}}))};j(i.createElement(g,{onDelete:t,onCancel:e}))},[A,P]),G=c(async()=>{try{await O(t._id,a({},I)),f({type:"success",message:b("Integration_updated")}),n()}catch(e){f({type:"error",message:e})}},[t._id,f,I,n,O,b]),N=r(()=>i.createElement(u,null,i.createElement(u.Row,{display:"flex",flexDirection:"column"},i.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(p,{inlineEnd:"x4"},i.createElement(E,{flexGrow:1,type:"reset",onClick:T},b("Reset")),i.createElement(E,{mie:"none",flexGrow:1,onClick:G},b("Save")))),i.createElement(E,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:R},b("Delete")))),[R,G,T,b]);return i.createElement(i.Fragment,null,i.createElement(y,l({formHandlers:S,formValues:I,extraData:{_id:t._id,token:t.token},append:N},d)),M)}}


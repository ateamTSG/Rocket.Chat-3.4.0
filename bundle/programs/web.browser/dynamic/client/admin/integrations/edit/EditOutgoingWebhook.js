function module(e,t,n){let l,o,r,a,i,s,u,d,c,m,g,p,E,v,x,k,b,f,h,y,C,w,D;function S(e){let{integrationId:t}=e,n=r(e,["integrationId"]);const l=x(),[u,d]=s(),{data:g,state:p,error:E}=k("integrations.get",i(()=>({integrationId:t}),[t,u])),v=()=>d(new Date);return p===b.LOADING?a.createElement(c,o({w:"full",pb:"x24"},n),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"}),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"}),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"})):E?a.createElement(c,o({mbs:"x16"},n),l("Oops_page_not_found")):a.createElement(W,o({data:g.integration,onChange:v},n))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){o=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),n.export({default:()=>S}),n.link("react",{default(e){a=e},useMemo(e){i=e},useState(e){s=e},useCallback(e){u=e}},0),n.link("@rocket.chat/fuselage",{Field(e){d=e},Box(e){c=e},Skeleton(e){m=e},Margins(e){g=e},Button(e){p=e}},1),n.link("./EditIntegrationsPage",{SuccessModal(e){E=e},DeleteWarningModal(e){v=e}},2),n.link("../../../contexts/TranslationContext",{useTranslation(e){x=e}},3),n.link("../../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){k=e},ENDPOINT_STATES(e){b=e}},4),n.link("../../../hooks/useEndpointAction",{useEndpointAction(e){f=e}},5),n.link("../../../contexts/RouterContext",{useRoute(e){h=e}},6),n.link("../../../contexts/ServerContext",{useMethod(e){y=e}},7),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){C=e}},8),n.link("../OutgoiongWebhookForm",{default(e){w=e}},9),n.link("../../../hooks/useForm",{useForm(e){D=e}},10);const I=e=>{var t,n,l,o,r,a,i,s,u,d,c,m,g,p,E,v,x,k;const b={enabled:null===(t=e.enabled)||void 0===t||t,impersonateUser:e.impersonateUser,event:e.event,token:e.token,urls:null!==(n=e.urls.join("\n"))&&void 0!==n?n:"",triggerWords:null!==(l=null===(o=e.triggerWords)||void 0===o?void 0:o.join("; "))&&void 0!==l?l:"",targetRoom:null!==(r=e.targetRoom)&&void 0!==r?r:"",channel:null!==(a=e.channel.join(", "))&&void 0!==a?a:"",username:null!==(i=e.username)&&void 0!==i?i:"",name:null!==(s=e.name)&&void 0!==s?s:"",alias:null!==(u=e.alias)&&void 0!==u?u:"",avatarUrl:null!==(d=e.avatarUrl)&&void 0!==d?d:"",emoji:null!==(c=e.emoji)&&void 0!==c?c:"",scriptEnabled:null!==(m=e.scriptEnabled)&&void 0!==m&&m,script:null!==(g=e.script)&&void 0!==g?g:"",retryFailedCalls:null===(p=e.retryFailedCalls)||void 0===p||p,retryCount:null!==(E=e.retryCount)&&void 0!==E?E:5,retryDelay:null!==(v=e.retryDelay)&&void 0!==v?v:"power-of-ten",triggerrWordAnywhere:null!==(x=e.triggerrWordAnywhere)&&void 0!==x&&x,runOnEdits:null===(k=e.runOnEdits)||void 0===k||k};return b};function W(e){let{data:t,onChange:n,setSaveAction:m}=e,k=r(e,["data","onChange","setSaveAction"]);const b=x(),S=C(),{handlers:W,values:_,reset:j}=D(I(t)),[A,O]=s(),T=y("updateOutgoingIntegration"),F=h("admin-integrations"),M=i(()=>({type:"webhook-outgoing",integrationId:t._id}),[t._id]),R=f("POST","integrations.remove",M),P=u(()=>{const e=()=>O(),t=async()=>{const t=await R();t.success&&O(a.createElement(E,{onClose:()=>{e(),F.push({})}}))};O(a.createElement(v,{onDelete:t,onCancel:e}))},[R,F]),{urls:U,triggerWords:G}=_,N=u(async()=>{try{await T(t._id,l({},_,{triggerWords:G.split(/\s*(?:;|$)\s*/),urls:U.split("\n")})),S({type:"success",message:b("Integration_updated")}),n()}catch(e){S({type:"error",message:e})}},[t._id,S,_,n,T,b,G,U]),B=i(()=>a.createElement(d,null,a.createElement(d.Row,{display:"flex",flexDirection:"column"},a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},a.createElement(g,{inlineEnd:"x4"},a.createElement(p,{flexGrow:1,type:"reset",onClick:j},b("Reset")),a.createElement(p,{mie:"none",flexGrow:1,onClick:N},b("Save")))),a.createElement(p,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:P},b("Delete")))),[P,N,j,b]);return a.createElement(a.Fragment,null,a.createElement(w,o({formValues:_,formHandlers:W,append:B},k)),A)}}


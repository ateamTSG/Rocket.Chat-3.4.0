function module(e,t,l){let n,a,r,c,o,i,m,u,s,E,d,p,h,_,C,b,k,f,g,w,x,y,A,S,v,T,R,D;l.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),l.link("@babel/runtime/helpers/extends",{default(e){a=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),l.export({default:()=>U}),l.link("react",{default(e){c=e},useCallback(e){o=e},useState(e){i=e},useMemo(e){m=e}},0),l.link("@rocket.chat/fuselage",{Box(e){u=e},Button(e){s=e},ButtonGroup(e){E=e},TextInput(e){d=e},Field(e){p=e},Icon(e){h=e},Skeleton(e){_=e},Throbber(e){C=e},InputBox(e){b=e},TextAreaInput(e){k=e},ToggleSwitch(e){f=e},FieldGroup(e){g=e}},1),l.link("../../contexts/TranslationContext",{useTranslation(e){w=e}},2),l.link("../../contexts/ServerContext",{useMethod(e){x=e},useAbsoluteUrl(e){y=e}},3),l.link("../../contexts/RouterContext",{useRoute(e){A=e}},4),l.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){S=e}},5),l.link("../../components/basic/Modal",{Modal(e){v=e}},6),l.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){T=e},ENDPOINT_STATES(e){R=e}},7),l.link("../../components/basic/VerticalBar",{default(e){D=e}},8);const I=e=>{let{onDelete:t,onCancel:l}=e,n=r(e,["onDelete","onCancel"]);const a=w();return(c.createElement(v,n,c.createElement(v.Header,null,c.createElement(h,{color:"danger",name:"modal-warning",size:20}),c.createElement(v.Title,null,a("Are_you_sure")),c.createElement(v.Close,{onClick:l})),c.createElement(v.Content,{fontScale:"p1"},a("Application_delete_warning")),c.createElement(v.Footer,null,c.createElement(E,{align:"end"},c.createElement(s,{ghost:!0,onClick:l},a("Cancel")),c.createElement(s,{primary:!0,danger:!0,onClick:t},a("Delete"))))))},L=e=>{let{onClose:t}=e,l=r(e,["onClose"]);const n=w();return(c.createElement(v,l,c.createElement(v.Header,null,c.createElement(h,{color:"success",name:"checkmark-circled",size:20}),c.createElement(v.Title,null,n("Deleted")),c.createElement(v.Close,{onClick:t})),c.createElement(v.Content,{fontScale:"p1"},n("Your_entry_has_been_deleted")),c.createElement(v.Footer,null,c.createElement(E,{align:"end"},c.createElement(s,{primary:!0,onClick:t},n("Ok"))))))};function U(e){let{_id:t}=e,l=r(e,["_id"]);const n=w(),[d,p]=i(),h=o(()=>{p(new Date)},[]),k=m(()=>({appId:t}),[t,d]),{data:f,state:g,error:x}=T("oauth-apps.get",k);return g===R.LOADING?c.createElement(u,{pb:"x20",maxWidth:"x600",w:"full",alignSelf:"center"},c.createElement(_,{mbs:"x8"}),c.createElement(b.Skeleton,{w:"full"}),c.createElement(_,{mbs:"x8"}),c.createElement(b.Skeleton,{w:"full"}),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(s,{disabled:!0},c.createElement(C,{inheritColor:!0})),c.createElement(s,{primary:!0,disabled:!0},c.createElement(C,{inheritColor:!0}))),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(s,{primary:!0,danger:!0,disabled:!0},c.createElement(C,{inheritColor:!0})))):!x&&f&&t?c.createElement(M,a({data:f.oauthApp,onChange:h},l)):c.createElement(u,{fontScale:"h1",pb:"x20"},n("error-application-not-found"))}function M(e){let{onChange:t,data:l}=e,u=r(e,["onChange","data"]);const _=w(),C=S(),[b,v]=i({name:l.name,active:l.active,redirectUri:Array.isArray(l.redirectUri)?l.redirectUri.join("\n"):l.redirectUri}),[T,R]=i(),U=A("admin-oauth-apps"),M=o(()=>U.push({}),[U]),O=y(),B=m(()=>O("oauth/authorize"),[O]),F=m(()=>O("oauth/token"),[O]),j=x("updateOAuthApp"),z=x("deleteOAuthApp"),G=o(async()=>{try{await j(l._id,b),C({type:"success",message:_("Application_updated")}),t()}catch(e){C({type:"error",message:e})}},[l._id,C,b,t,j,_]),H=o(async()=>{try{await z(l._id),R(()=>c.createElement(L,{onClose:()=>{R(),M()}}))}catch(e){C({type:"error",message:e})}},[M,l._id,z,C]),N=()=>R(()=>c.createElement(I,{onDelete:H,onCancel:()=>R(void 0)})),W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e.currentTarget.value;return l=>v(n({},b,{[e]:t(l)}))},{active:P,name:V,redirectUri:Y}=b;return c.createElement(c.Fragment,null,c.createElement(D.ScrollableContent,a({w:"full"},u),c.createElement(g,{maxWidth:"x600",alignSelf:"center",w:"full"},c.createElement(p,null,c.createElement(p.Label,{display:"flex",justifyContent:"space-between",w:"full"},_("Active"),c.createElement(f,{checked:P,onChange:W("active",()=>!P)}))),c.createElement(p,null,c.createElement(p.Label,null,_("Application_Name")),c.createElement(p.Row,null,c.createElement(d,{value:V,onChange:W("name")})),c.createElement(p.Hint,null,_("Give_the_application_a_name_This_will_be_seen_by_your_users"))),c.createElement(p,null,c.createElement(p.Label,null,_("Redirect_URI")),c.createElement(p.Row,null,c.createElement(k,{rows:5,value:Y,onChange:W("redirectUri")})),c.createElement(p.Hint,null,_("After_OAuth2_authentication_users_will_be_redirected_to_this_URL"))),c.createElement(p,null,c.createElement(p.Label,null,_("Client_ID")),c.createElement(p.Row,null,c.createElement(d,{value:l.clientId,onChange:W("clientId")}))),c.createElement(p,null,c.createElement(p.Label,null,_("Client_Secret")),c.createElement(p.Row,null,c.createElement(d,{value:l.clientSecret}))),c.createElement(p,null,c.createElement(p.Label,null,_("Authorization_URL")),c.createElement(p.Row,null,c.createElement(d,{value:B}))),c.createElement(p,null,c.createElement(p.Label,null,_("Access_Token_URL")),c.createElement(p.Row,null,c.createElement(d,{value:F}))),c.createElement(p,null,c.createElement(p.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(s,{onClick:M},_("Cancel")),c.createElement(s,{primary:!0,onClick:G},_("Save"))))),c.createElement(p,null,c.createElement(p.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(s,{primary:!0,danger:!0,onClick:N},c.createElement(h,{name:"trash",mie:"x4"}),_("Delete"))))))),T)}}


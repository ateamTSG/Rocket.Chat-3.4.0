function module(e,t,n){let l,a,o,r,c,s,i,m,u,_,d,g,h,E,C,p,k,x,b,y,f;n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){a=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){o=e}},2),n.export({UserInfoActions:()=>T}),n.link("react",{default(e){r=e},useCallback(e){c=e},useMemo(e){s=e},useState(e){i=e}},0),n.link("@rocket.chat/fuselage",{Box(e){m=e},Button(e){u=e},ButtonGroup(e){_=e},Icon(e){d=e},Menu(e){g=e}},1),n.link("../../components/basic/Modal",{Modal(e){h=e}},2),n.link("../../contexts/TranslationContext",{useTranslation(e){E=e}},3),n.link("../../contexts/RouterContext",{useRoute(e){C=e}},4),n.link("../../contexts/AuthorizationContext",{usePermission(e){p=e}},5),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){k=e}},6),n.link("../../contexts/ServerContext",{useMethod(e){x=e},useEndpoint(e){b=e}},7),n.link("../../contexts/SettingsContext",{useSetting(e){y=e}},8),n.link("../../components/basic/RawText",{default(e){f=e}},9);const v=e=>{let{onDelete:t,onCancel:n}=e,l=o(e,["onDelete","onCancel"]);const a=E(),c=y("Message_ErasureType");return r.createElement(h,l,r.createElement(h.Header,null,r.createElement(d,{color:"danger",name:"modal-warning",size:20}),r.createElement(h.Title,null,a("Are_you_sure")),r.createElement(h.Close,{onClick:n})),r.createElement(h.Content,{fontScale:"p1"},a("Delete_User_Warning_".concat(c))),r.createElement(h.Footer,null,r.createElement(_,{align:"end"},r.createElement(u,{ghost:!0,onClick:n},a("Cancel")),r.createElement(u,{primary:!0,danger:!0,onClick:t},a("Delete")))))},w=e=>{let{onConfirm:t,onCancel:n,contentTitle:l="",confirmLabel:a="",shouldChangeOwner:c,shouldBeRemoved:s}=e,i=o(e,["onConfirm","onCancel","contentTitle","confirmLabel","shouldChangeOwner","shouldBeRemoved"]);const g=E();let C="";c.length>0&&(C=1===c.length?g("A_new_owner_will_be_assigned_automatically_to_the__roomName__room",{roomName:c.pop()}):c.length<=5?g("A_new_owner_will_be_assigned_automatically_to_those__count__rooms__rooms__",{count:c.length,rooms:c.join(", ")}):g("A_new_owner_will_be_assigned_automatically_to__count__rooms",{count:c.length}));let p="";return s.length>0&&(p=1===s.length?g("The_empty_room__roomName__will_be_removed_automatically",{roomName:s.pop()}):s.length<=5?g("__count__empty_rooms_will_be_removed_automatically__rooms__",{count:s.length,rooms:s.join(", ")}):g("__count__empty_rooms_will_be_removed_automatically",{count:s.length})),r.createElement(h,i,r.createElement(h.Header,null,r.createElement(d,{color:"danger",name:"modal-warning",size:20}),r.createElement(h.Title,null,g("Are_you_sure")),r.createElement(h.Close,{onClick:n})),r.createElement(h.Content,{fontScale:"p1"},l,C&&r.createElement(m,{marginBlock:"x16"},r.createElement(f,null,C)),p&&r.createElement(m,{marginBlock:"x16"},r.createElement(f,null,p))),r.createElement(h.Footer,null,r.createElement(_,{align:"end"},r.createElement(u,{ghost:!0,onClick:n},g("Cancel")),r.createElement(u,{primary:!0,danger:!0,onClick:t},a))))},A=e=>{let{onClose:t}=e,n=o(e,["onClose"]);const l=E();return(r.createElement(h,n,r.createElement(h.Header,null,r.createElement(d,{color:"success",name:"checkmark-circled",size:20}),r.createElement(h.Title,null,l("Deleted")),r.createElement(h.Close,{onClick:t})),r.createElement(h.Content,{fontScale:"p1"},l("User_has_been_deleted")),r.createElement(h.Footer,null,r.createElement(_,{align:"end"},r.createElement(u,{primary:!0,onClick:t},l("Ok"))))))},T=e=>{let{username:t,_id:n,isActive:h,isAdmin:f,onChange:T}=e,S=o(e,["username","_id","isActive","isAdmin","onChange"]);const D=E(),[M,O]=i(),R=C("direct"),z=C("admin-users"),B=k(),U=p("create-d"),F=p("edit-other-user-info"),j=p("assign-admin-role"),N=p("edit-other-user-active-status"),I=p("delete-user"),L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async()=>{try{return await e()}catch(o){var n,l;if("user-last-owner"===(null===(n=o.xhr)||void 0===n?void 0:null===(l=n.responseJSON)||void 0===l?void 0:l.errorType)){const{shouldChangeOwner:n,shouldBeRemoved:l}=o.xhr.responseJSON.details;return void O(r.createElement(w,a({shouldChangeOwner:n,shouldBeRemoved:l},t,{onConfirm:async()=>{await e(!0),O()},onCancel:()=>{O(),T()}})))}B({type:"error",message:o})}}},P=s(()=>({userId:n}),[n]),H=b("POST","users.delete"),W=y("Message_ErasureType"),q=L((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(P.confirmRelinquish=e);const t=await H(P);t.success?O(r.createElement(A,{onClose:()=>{O(),T()}})):O()}),{contentTitle:D("Delete_User_Warning_".concat(W)),confirmLabel:D("Delete")}),G=c(()=>{O(r.createElement(v,{onDelete:q,onCancel:()=>O()}))},[q]),J=x("setAdminStatus"),Y=c(()=>{try{J(n,!f);const e=f?"User_is_no_longer_an_admin":"User_is_now_an_admin";B({type:"success",message:D(e)}),T()}catch(e){B({type:"error",message:e})}},[n,B,f,T,J,D]),K=s(()=>({userId:n,activeStatus:!h}),[n,h]),Q=h?"User_has_been_deactivated":"User_has_been_activated",V=b("POST","users.setActiveStatus"),X=L((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(K.confirmRelinquish=e);try{const e=await V(K);e.success&&(B({type:"success",message:D(Q)}),T())}catch(t){throw t}}),{confirmLabel:D("Yes_deactivate_it")}),Z=c(()=>R.push({rid:t}),[R,t]),$=c(()=>z.push({context:"edit",id:n}),[n,z]),ee=s(()=>l({},U&&{directMessage:{label:r.createElement(r.Fragment,null,r.createElement(d,{name:"chat",size:"x16",mie:"x8"}),D("Direct_Message")),action:Z}},{},F&&{editUser:{label:r.createElement(r.Fragment,null,r.createElement(d,{name:"edit",size:"x16",mie:"x8"}),D("Edit")),action:$}},{},j&&{makeAdmin:{label:r.createElement(r.Fragment,null,r.createElement(d,{mie:"x4",name:"key",size:"x16"}),D(f?"Remove_Admin":"Make_Admin")),action:Y}},{},I&&{delete:{label:r.createElement(m,{color:"danger"},r.createElement(d,{mie:"x4",name:"trash",size:"x16"}),D("Delete")),action:G}},{},N&&{changeActiveStatus:{label:r.createElement(r.Fragment,null,r.createElement(d,{mie:"x4",name:"user",size:"x16"}),D(h?"Deactivate":"Activate")),action:X}}),[D,U,Z,F,$,j,f,Y,I,G,N,h,X]),[te,ne]=s(()=>{const e=Object.keys(ee),t=e.slice(0,2),n=e.slice(2,e.length);return[t.length&&t.map(e=>ee[e]),n.length&&Object.fromEntries(n.map(e=>[e,ee[e]]))]},[ee]);return r.createElement(r.Fragment,null,r.createElement(m,a({display:"flex",flexDirection:"row"},S),r.createElement(_,{flexGrow:1,justifyContent:"center"},te&&te.map((e,t)=>r.createElement(u,{key:t,onClick:e.action},e.label)),ne&&r.createElement(g,{options:ne,placement:"bottom left"}))),M)}}


function module(e,t,s){let a,n,r,l,i,o,u,d,c,m,f,p,E,k,v,_,x,h,b,w;function A(e){let{uid:t}=e,s=n(e,["uid"]);const i=f(),{data:o,state:d,error:c}=p("roles.list","")||{},{data:m,state:k,error:v}=p("users.info",l(()=>({userId:t}),[t]));return[k,d].includes(E.LOADING)?r.createElement(w,null):v||c?r.createElement(u,a({mbs:"x16"},s),i("User_not_found")):r.createElement(y,a({data:m.user,roles:o.roles},s))}s.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),s.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),s.export({EditUserWithData:()=>A,EditUser:()=>y}),s.link("react",{default(e){r=e},useMemo(e){l=e},useState(e){i=e},useCallback(e){o=e}},0),s.link("@rocket.chat/fuselage",{Box(e){u=e},Field(e){d=e},Margins(e){c=e},Button(e){m=e}},1),s.link("../../contexts/TranslationContext",{useTranslation(e){f=e}},2),s.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){p=e},ENDPOINT_STATES(e){E=e}},3),s.link("../../hooks/useEndpointAction",{useEndpointAction(e){k=e}},4),s.link("../../hooks/useEndpointUpload",{useEndpointUpload(e){v=e}},5),s.link("../../contexts/RouterContext",{useRoute(e){_=e}},6),s.link("../../components/basic/avatar/UserAvatarEditor",{default(e){x=e}},7),s.link("../../hooks/useForm",{useForm(e){h=e}},8),s.link("./UserForm",{default(e){b=e}},9),s.link("./Skeleton",{FormSkeleton(e){w=e}},10);const U=e=>{var t,s,a,n;return{roles:e.roles,name:null!==(t=e.name)&&void 0!==t?t:"",password:"",username:e.username,status:e.status,bio:null!==(s=e.bio)&&void 0!==s?s:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(a=e.customFields)&&void 0!==a?a:{},statusText:null!==(n=e.statusText)&&void 0!==n?n:""}};function y(e){let{data:t,roles:s}=e,p=n(e,["data","roles"]);const E=f(),[w,A]=i(),{values:y,handlers:S,reset:T,hasUnsavedChanges:g}=h(U(t)),C=_("admin-users"),O=o(e=>C.push({context:"info",id:e}),[C]),P=l(()=>({userId:t._id,data:y}),[t._id,JSON.stringify(y)]),F=l(()=>({userId:t._id,avatarUrl:w&&w.avatarUrl}),[t._id,JSON.stringify(w)]),I=l(()=>({userId:t._id}),[t._id]),R=k("POST","users.update",P,E("User_updated_successfully")),D=v("users.setAvatar",F,E("Avatar_changed_successfully")),N=k("POST","users.setAvatar",F,E("Avatar_changed_successfully")),j=k("POST","users.resetAvatar",I,E("Avatar_changed_successfully")),G=o(async()=>"reset"===w?j():w.avatarUrl?N():(w.set("userId",t._id),D(w)),[w,j,D,N,t._id]),B=o(async()=>{const e=await R();e.success&&(w&&await G(),O(t._id))},[w,t._id,O,R,G]),J=s.map(e=>{let{_id:t,description:s}=e;return[t,s||t]}),M=g||w,W=l(()=>r.createElement(x,{username:t.username,setAvatarObj:A}),[t.username]),q=l(()=>r.createElement(d,null,r.createElement(d.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(c,{inlineEnd:"x4"},r.createElement(m,{flexGrow:1,type:"reset",disabled:!M,onClick:T},E("Reset")),r.createElement(m,{mie:"none",flexGrow:1,disabled:!M,onClick:B},E("Save")))))),[B,M,T,E]);return r.createElement(b,a({formValues:y,formHandlers:S,availableRoles:J,prepend:W,append:q},p))}}

